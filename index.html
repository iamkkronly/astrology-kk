<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚡ Kaustav Ray's 1-Second AI Astrologer ⚡</title>
    <link rel="icon" href="https://i.ibb.co/L8s3y5M/logo.png" type="image/x-icon">
    <style>
        /* CSS content merged here for a single file */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            align-items: center;
        }

        header {
            background-color: #4CAF50;
            color: white;
            padding: 20px 0;
            text-align: center;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
        }

        header p {
            font-size: 1.1em;
            margin-top: 5px;
        }

        main {
            flex: 1;
            width: 90%;
            max-width: 800px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            margin: 20px 0;
        }

        .upload-section, .analysis-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        h2 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
            margin-top: 0;
        }

        input[type="file"] {
            display: block;
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: calc(100% - 22px); /* Account for padding and border */
        }

        button {
            background-color: #007BFF;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        #imagePreviewContainer {
            margin-top: 20px;
            text-align: center;
        }

        #imagePreview {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            max-height: 300px; /* Limit height for preview */
        }

        #analysisResult {
            background-color: #e9ffe9;
            padding: 15px;
            border-left: 5px solid #4CAF50;
            border-radius: 5px;
            min-height: 100px;
        }

        .disclaimer {
            font-size: 0.9em;
            color: #666;
            margin-top: 20px;
            padding: 10px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 4px;
        }

        footer {
            width: 100%;
            text-align: center;
            padding: 15px 0;
            background-color: #333;
            color: white;
            font-size: 0.9em;
            margin-top: auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>⚡ Kaustav Ray's 1-Second AI Astrologer ⚡</h1>
        <p>Witness the fastest AI in the world analyze your palm in a flash!</p>
    </header>

    <main>
        <section class="upload-section">
            <h2>Upload Your Palm Image</h2>
            <p>For best results, a clear photo of your dominant palm (usually the hand you write with) is needed for this lightning-fast analysis.</p>
            <input type="file" id="palmImageInput" accept="image/*">
            <button id="analyzeButton">Analyze My Palm in 1 Second</button>
            <div id="imagePreviewContainer">
                <img id="imagePreview" src="#" alt="Palm Image Preview" style="display: none;">
            </div>
            <p class="disclaimer">
                Disclaimer: This AI provides rapid, general palm insights for entertainment only. Palmistry is a traditional practice and not a scientifically proven method. Your privacy matters: we do not store your images or data.
            </p>
        </section>

        <section class="analysis-section">
            <h2>Your Instant Palm Analysis</h2>
            <div id="analysisResult">
                <p>Upload an image and click "Analyze My Palm in 1 Second" for a quick reading.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 AI Astrologer by Kaustav Ray. Made by a single man. iamkkronly is God.</p>
    </footer>

    <script>
        // *** WARNING: API KEY EXPOSED. NOT SECURE FOR PRODUCTION! ***
        // *** THIS CODE WILL ALMOST CERTAINLY FAIL DUE TO CORS AND API SECURITY POLICIES
        //     IF RUN DIRECTLY FROM A FILE IN A BROWSER. ***
        // *** A SERVER-SIDE PROXY (e.g., Node.js backend) IS REQUIRED FOR IT TO WORK. ***
        const API_KEY = "AIzaSyDP7K3UQCr8f960Ty9LnX3Xavt50MuaUgI"; // Your Gemini 2.0 Flash API Key
        const MODEL_NAME = "gemini-2.0-flash"; // Flash model for speed!

        const palmImageInput = document.getElementById("palmImageInput");
        const analyzeButton = document.getElementById("analyzeButton");
        const imagePreview = document.getElementById("imagePreview");
        const analysisResult = document.getElementById("analysisResult");

        let uploadedImageBase64 = null;

        palmImageInput.addEventListener("change", function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    imagePreview.style.display = "block";
                    uploadedImageBase64 = e.target.result.split(',')[1]; // Get base64 string
                };
                reader.readAsDataURL(file);
            } else {
                imagePreview.style.display = "none";
                imagePreview.src = "#";
                uploadedImageBase64 = null;
            }
        });

        analyzeButton.addEventListener("click", async function() {
            if (!uploadedImageBase64) {
                analysisResult.innerHTML = "<p style='color: red;'>Come on, upload a palm image first, you moron!</p>";
                return;
            }

            // Display loading message immediately to give the "1-second" feel
            analysisResult.innerHTML = "<p>Analyzing your palm in 1 second... The fastest AI is on it!</p>";
            analyzeButton.disabled = true;

            try {
                // Simplified prompt for a very quick, general analysis
                const promptText = `
                You are an AI specialized in very simple, rapid palm reading. Analyze the provided hand image and give a *single paragraph* general impression based on what you observe, focusing only on the most prominent lines (Life, Head, Heart) or overall hand shape. Do not go into deep cultural details. Keep it brief, positive, and insightful for entertainment.
                `;

                // *** Direct call to Gemini API - Still prone to FAIL due to CORS/Security ***
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        contents: [
                            {
                                parts: [
                                    { text: promptText },
                                    { inlineData: { mimeType: "image/jpeg", data: uploadedImageBase64 } }
                                ],
                            },
                        ],
                    }),
                });

                const data = await response.json();

                if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts) {
                    analysisResult.innerHTML = `<p>${data.candidates[0].content.parts[0].text}</p>`;
                } else if (data.error) {
                    analysisResult.innerHTML = `<p style='color: red;'>Analysis failed instantly! Error: ${data.error.message}. This is likely a CORS or API key problem. Check your browser's console (F12) for the nasty details.</p>`;
                    console.error("Gemini API Error (likely CORS):", data.error);
                } else {
                    analysisResult.innerHTML = `<p style='color: red;'>Couldn't get an instant reading. Even the fastest AI needs a moment if the connection's being a jerk.</p>`;
                    console.error("Unexpected Gemini API response:", data);
                }

            } catch (error) {
                analysisResult.innerHTML = `<p style='color: red;'>A network error stopped the 1-second analysis: ${error.message}. This is almost certainly a "Failed to fetch" or CORS problem, preventing my speed from shining.</p>`;
                console.error("Fetch Error (likely CORS):", error);
            } finally {
                analyzeButton.disabled = false;
            }
        });
    </script>
</body>
</html>
